<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Encuesta de Satisfacci√≥n</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background-color: #6A0F20; /* GUINDA */
      position: relative;
      background-attachment: fixed;
    }

    /* ===== MARCA DE AGUA CON TU IMAGEN ===== */
    .container {
      max-width: 900px;
      margin: auto;
      background: rgba(255,255,255,0.93);
      padding: 20px;
      border-radius: 12px;
      backdrop-filter: blur(4px);
      position: relative; /* necesario */
      overflow: hidden; /* evita que el logo sobresalga */
    }

/* Marca de agua dentro del cuadro blanco */
    .container::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70%;        /* tama√±o del logo */
      height: 70%;
      background-image: url("FID.jpg"); /* tu logo */
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      opacity: 0.08;     /* transparencia */
      pointer-events: none; /* no bloquea clics */
      z-index: 0;
      }

/* Para que los textos queden arriba del logo */
    .container * {
      position: relative;
      z-index: 1;
    }


    /* Hace que el contenido est√© por encima del fondo */
    .page, .container {
      position: relative;
      z-index: 1;
    }

    /* ===== CONTENEDOR CON FONDO BLANCO TRASL√öCIDO ===== */
    .container { max-width: 900px; margin: auto; background: rgba(255,255,255,0.93); /* blanco 93% */ padding: 20px; border-radius: 12px; backdrop-filter: blur(4px); }

    .page { display: none; padding: 20px; }

    .active { 
      display: block; 
    }

    .question { margin-bottom: 20px; }

    label { display: block; margin-bottom: 8px; font-weight: bold; }

    input[type="text"], textarea, select { width: 100%; padding: 12px; font-size: 18px; border-radius: 8px; border: 1px solid #ccc; }
    
    textarea { height: 100px; }
    .emoji-row { display: flex; gap: 100px; justify-content: center; }
    .emoji-container {display: flex; flex-direction: column; align-items: center;} 
    .emoji { font-size: 180px; cursor: pointer; opacity: 0.5; transition: 0.2s; }
    .emoji.selected { opacity: 1; transform: scale(1.2); }
    .emoji-text {margin-top: -10px; font-size: 22px; font-weight: 600; color: #333; text-align: center;}
    button {
      width: 100%; padding: 16px; font-size: 20px; border: none; border-radius: 10px; cursor: pointer; background: #007bff; color: white;
    }
    /* === FADE SUAVE DEL CARRUSEL === */
    #carousel-img {
      width: 100%;
      height: auto;
      border-radius: 12px;
      opacity: 0;
      transition: opacity 2s ease-in-out;
    }

  </style>
</head>
<body>
  <!-- PAGINA PRINCIPAL -->
  <div id="page-main" class="page active">
    <div class="container">
      <h2>Encuesta de Satisfacci√≥n</h2>

      <div class="question">
        <label>1. Nombre del paciente</label>
        <input id="nombre" type="text" />
      </div>

      <div class="question">
        <label>2. ¬øQu√© tan satisfecho est√°s con nuestro servicio?</label>
        <div class="emoji-row">
          <div class="emoji-container">
            <div class="emoji" data-value="malo">üôÅ</div>
            <div class="emoji-text">Muy insatisfecho</div>
          </div>
        
          <div class="emoji-container">
            <div class="emoji" data-value="medio">üòê</div>
            <div class="emoji-text">Neutral</div>
          </div>
        
        
          <div class="emoji-container">
            <div class="emoji" data-value="bueno">üòÉ</div>
            <div class="emoji-text">Muy satisfecho</div>
          </div>
        </div>
      </div>

      <div class="question">
        <label>3. Tipo de servicio</label>
        <select id="servicio">
          <option value="">Seleccione...</option>
          <option>Terapia de lenguaje</option>
          <option>Terapia acu√°tica</option>
          <option>Terapia motriz</option>
        </select>
      </div>

      <div class="question">
        <label>4. Colaborador</label>
        <select id="colaborador">
          <option value="">Seleccione...</option>
          <option>Juan</option>
          <option>Marisol</option>
          <option>Esteban</option>
        </select>
      </div>

      <div class="question">
        <label>5. Observaciones</label>
        <textarea id="observaciones"></textarea>
      </div>

      <button id="btnEnviar">Enviar</button>
    </div>
  </div>

  <!-- PAGINA DE AGRADECIMIENTO -->
  <div id="page-thanks" class="page">
    <div class="container">
      <h2>¬°Gracias por tus comentarios!</h2>
    </div>
  </div>

  <!-- PAGINA DE ESPERA -->
  <div id="page-wait" class="page">
    <div class="container">
      <h2>Pantalla de espera</h2>
      <div class="carousel">
        <img id="carousel-img" src="" alt="imagen" />
      </div>
    </div>
  </div>

  <script>
    // ------------------------ VARIABLES ------------------------
    let selectedSatisfaction = null;
    const emojis = document.querySelectorAll('.emoji');
    const pages = {
      main: document.getElementById('page-main'),
      thanks: document.getElementById('page-thanks'),
      wait: document.getElementById('page-wait')
    };

    let inactivityTimer;

    // ------------------------ EMOJIS ------------------------
    emojis.forEach(e => {
      e.addEventListener('click', () => {
        emojis.forEach(x => x.classList.remove('selected'));
        e.classList.add('selected');
        selectedSatisfaction = e.dataset.value;
      });
    });

    // ------------------------ VALIDACI√ìN Y ENV√çO ------------------------
    document.getElementById('btnEnviar').addEventListener('click', () => {
      const nombre = document.getElementById('nombre').value.trim();
      const servicio = document.getElementById('servicio').value;
      const colaborador = document.getElementById('colaborador').value;
      const observaciones = document.getElementById('observaciones').value.trim();

      if (!nombre || !selectedSatisfaction || !servicio || !colaborador || !observaciones) {
        alert("Todos los campos son obligatorios.");
        return;
      }

      // Enviar a Google Sheets mediante Google Apps Script
      fetch(`https://script.google.com/macros/s/AKfycbwO2o01SLkLwluqiEsVuD79wRc5e0_SBodq1KSAFis2hRyLN6-IWeJoW-x8f86gCXc/exec`, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nombre, selectedSatisfaction, servicio, colaborador, observaciones })
      });

      showPage('thanks');
      setTimeout(() => showPage('main'), 10000);
    });

    // ------------------------ PANTALLA DE ESPERA ------------------------
    const images = [ // Cambiar por tus im√°genes
      "carrusel1.JPG", "carrusel2.JPG", "carrusel3.JPG", "carrusel4.JPG", "carrusel5.JPG", "carrusel6.JPG", "carrusel7.JPG", "carrusel8.JPG", "carrusel9.JPG", "carrusel10.JPG",
    ];
    let idx = 0;
    setInterval(() => {
      if (pages.wait.classList.contains('active')) {
    
        const img = document.getElementById('carousel-img');
    
    // Oculta suavemente la imagen actual
        img.style.opacity = 0;

        setTimeout(() => {
      // Cambia a la siguiente imagen
          img.src = images[idx];
          idx = (idx + 1) % images.length;

      // Muestra suavemente la nueva imagen
          img.style.opacity = 1;
        }, 300); // tiempo entre fade-out y cambio de imagen
    
      }
    }, 3000);
    // ------------------------ INACTIVIDAD ------------------------
    function resetInactivity() {
      clearTimeout(inactivityTimer);
      inactivityTimer = setTimeout(() => showPage('wait'), 60000);
    }

    document.addEventListener('mousemove', resetInactivity);
    document.addEventListener('touchstart', resetInactivity);
    resetInactivity();

    // ------------------------ NAVEGACI√ìN ------------------------
    function showPage(p) {
      Object.values(pages).forEach(pg => pg.classList.remove('active'));
      pages[p].classList.add('active');
    }
  </script>
</body>
</html>
